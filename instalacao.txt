##
Instruções para instalação do Indy Pool utilizando a infraestrutura Von Network em uma nova máquina virtual
##

sudo apt-get update && sudo apt-get upgrade

sudo apt install -y docker.io docker-compose python3 python-pip maven net-tools

sudo usermod -aG docker ubuntu
newgrp docker

#ATENÇÃO, PRECISAMOS EXECUTAR AS LINHAS ABAIXO PARA PERMITIR QUE O DOCKER CONSIGA BAIXAR AS IMAGENS QUANDO RODARMOS O AMBIENTE.
ISSO ACONTECE PORQUE O MTU DO DOCKER É MAIOR DO QUE O PERMITIDO PELO OPENSTACK, ENTÃO PRECISAMOS MUDAR O MTU PARA SE ADEQUAR
AO OPENSTACK!!!
#
ifconfig
#PEGUE O VALOR DO SEU MTU, NESSE CASO, 1442#

sudo cp /lib/systemd/system/docker.service /etc/systemd/system/docker.service
sudo vi /etc/systemd/system/docker.service

#PROCURE A LINHA ABAIXO E MUDE O MTU PARA O SEU VALOR DO IFCONFIG#
ExecStart=/usr/bin/docker daemon -H fd:// --mtu 1442 #VOCE PODE SÓ ADICIONAR NO FINAL DA LINHA A FLAG --MTU

sudo systemctl daemon-reload
sudo service docker restart

git clone https://github.com/bcgov/von-network
cd von-network
./manage build
./manage start --logs

./manage cli init-pool local_net http://<IP>:9000/genesis


# para adicionar/modificar nodos
https://github.com/bcgov/von-network/blob/main/docs/AddNewNode.md